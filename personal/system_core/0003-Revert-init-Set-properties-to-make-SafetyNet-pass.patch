From 1d10c9914d80182aa94a18abb9fa5b3a3855e313 Mon Sep 17 00:00:00 2001
From: Victor Bo <bvoid@yandex.ru>
Date: Wed, 13 Oct 2021 02:37:20 +0000
Subject: [PATCH 03/14] Revert "init: Set properties to make SafetyNet pass."

This reverts commit d3d95757c4001696fa6976c2379fddd5a8356110.
---
 init/property_service.cpp | 13 -------------
 1 file changed, 13 deletions(-)

diff --git a/init/property_service.cpp b/init/property_service.cpp
index 9afb78b5a..c46256ab3 100644
--- a/init/property_service.cpp
+++ b/init/property_service.cpp
@@ -1132,13 +1132,6 @@ static void ProcessKernelCmdline() {
     }
 }
 
-static void SetSafetyNetProps() {
-    InitPropertySet("ro.boot.flash.locked", "1");
-    InitPropertySet("ro.boot.verifiedbootstate", "green");
-    InitPropertySet("ro.boot.veritymode", "enforcing");
-    InitPropertySet("ro.boot.vbmeta.device_state", "locked");
-}
-
 void PropertyInit() {
     selinux_callback cb;
     cb.func_audit = PropertyAuditCallback;
@@ -1153,12 +1146,6 @@ void PropertyInit() {
         LOG(FATAL) << "Failed to load serialized property info file";
     }
 
-    // Report a valid verified boot chain to make Google SafetyNet integrity
-    // checks pass. This needs to be done before parsing the kernel cmdline as
-    // these properties are read-only and will be set to invalid values with
-    // androidboot cmdline arguments.
-    SetSafetyNetProps();
-
     // If arguments are passed both on the command line and in DT,
     // properties set in DT always have priority over the command-line ones.
     ProcessKernelDt();
-- 
2.25.1

